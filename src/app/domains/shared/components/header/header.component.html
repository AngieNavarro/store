<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center" href="https://flowbite.com/">
      <img src="https://flowbite.com/docs/images/logo.svg" alt="Flowbite Logo" class="me-2" height="30">
      <span class="fw-semibold">Flowbite</span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-4">
        <li class="nav-item">
          <a class="nav-link active" routerLink="/" routerLinkActive="text-decoration-underline"
            [routerLinkActiveOptions]="{exact:true}">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/about" routerLinkActive="text-decoration-underline">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/servicios" routerLinkActive="text-decoration-underline">Services</a>
        </li>
      </ul>
    </div>

    <!-- Botón del carrito -->
    <button class="btn position-relative" data-bs-toggle="offcanvas" data-bs-target="#cartOffcanvas">
      <!-- Contador sobre el SVG -->
      <div
        class="position-absolute top-0 start-100 translate-middle rounded-circle bg-black text-white d-flex align-items-center justify-content-center"
        style="width: 1.5rem; height: 1.5rem; font-size: 0.75rem;">
        {{ cart().length }}
      </div>

      <!-- Icono del carrito -->
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        width="32" height="32">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z">
        </path>
      </svg>
    </button>

  </div>
</nav>

<!-- Offcanvas del carrito -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="cartOffcanvas">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">My Cart</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <!-- Contenido del carrito -->
    <div>
      <div *ngFor="let product of cart()">
        <div class="d-flex justify-content-between align-items-center mt-2">
          <div><img [src]="product.images[0]" alt="Product Image" class="img-fluid"
              style="max-width: 50px; height: auto;"></div>
          <div>{{product.title}}</div>
          <div>{{ product.price.toLocaleString('es-CO', { style: 'currency', currency: 'COP' }) }}</div>
        </div>
      </div>

      <!-- Línea de separación -->
      <hr class="mt-3 mb-3 fw-bold">

      <!-- Total centrado -->
      <div class="text-end fw-bold">
        <p>Total: {{ total().toLocaleString('es-CO', { style: 'currency', currency: 'COP' }) }}</p>
      </div>
    </div>

  </div>
</div>
